{% extends 'base.html' %}

{% block title %}Gruppenverwaltung{% endblock %}

{% block content %}
    <h1 class="text-3xl font-bold text-gray-800 mb-6">Gruppenübersicht</h1>

    <div class="mb-8 p-4 bg-gray-100 rounded-lg">
        <h2 class="text-xl font-semibold mb-4">Neue Gruppe hinzufügen</h2>
        <form action="{{ url_for('add_group') }}" method="post" class="space-y-4">
            <button type="submit" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-300">
                Gruppe hinzufügen
            </button>
        </form>
    </div>

    {% if data %}
    <div class="space-y-4">
        {% for group_name, group_details in data.items() %}
        <div class="p-4 border rounded-lg bg-gray-50" id="group-container-{{ loop.index }}">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center">
                <h3 class="text-lg font-medium text-gray-800 mb-2 sm:mb-0">{{ group_name }} <span class="text-sm text-gray-500">({{ group_details.participants|length }} Teilnehmer)</span></h3>
                <div class="flex flex-col sm:flex-row sm:space-x-2 space-y-2 sm:space-y-0">
                    <a href="{{ url_for('show_group', group_name=group_name) }}" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Details anzeigen</a>
                    <button class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700" onclick="...">Bearbeiten</button>
                    <form action="{{ url_for('delete_group', group_name=group_name) }}" method="post" onsubmit="return confirm('Möchten Sie die Gruppe \'{{ group_name }}\' wirklich löschen?');">
                        <button type="submit" class="bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700">Löschen</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endblock %}